{#
/**
 * @file
 * Theme override to display a node.
 *
 * Available variables:
 * - node: The node entity with limited access to object properties and methods.
     Only "getter" methods (method names starting with "get", "has", or "is")
     and a few common methods such as "id" and "label" are available. Calling
     other methods (such as node.delete) will result in an exception.
 * - label: The title of the node.
 * - content: All node items. Use {{ content }} to print them all,
 *   or print a subset such as {{ content.field_example }}. Use
 *   {{ content|without('field_example') }} to temporarily suppress the printing
 *   of a given child element.
 * - author_picture: The node author user entity, rendered using the "compact"
 *   view mode.
 * - metadata: Metadata for this node.
 * - date: Themed creation date field.
 * - author_name: Themed author name field.
 * - url: Direct URL of the current node.
 * - display_submitted: Whether submission information should be displayed.
 * - attributes: HTML attributes for the containing element.
 *   The attributes.class element may contain one or more of the following
 *   classes:
 *   - node: The current template type (also known as a "theming hook").
 *   - node--type-[type]: The current node type. For example, if the node is an
 *     "Article" it would result in "node--type-article". Note that the machine
 *     name will often be in a short form of the human readable label.
 *   - node--view-mode-[view_mode]: The View Mode of the node; for example, a
 *     teaser would result in: "node--view-mode-teaser", and
 *     full: "node--view-mode-full".
 *   The following are controlled through the node publishing options.
 *   - node--promoted: Appears on nodes promoted to the front page.
 *   - node--sticky: Appears on nodes ordered above other non-sticky nodes in
 *     teaser listings.
 *   - node--unpublished: Appears on unpublished nodes visible only to site
 *     admins.
 * - title_attributes: Same as attributes, except applied to the main title
 *   tag that appears in the template.
 * - content_attributes: Same as attributes, except applied to the main
 *   content tag that appears in the template.
 * - author_attributes: Same as attributes, except applied to the author of
 *   the node tag that appears in the template.
 * - title_prefix: Additional output populated by modules, intended to be
 *   displayed in front of the main title tag that appears in the template.
 * - title_suffix: Additional output populated by modules, intended to be
 *   displayed after the main title tag that appears in the template.
 * - view_mode: View mode; for example, "teaser" or "full".
 * - teaser: Flag for the teaser state. Will be true if view_mode is 'teaser'.
 * - page: Flag for the full page state. Will be true if view_mode is 'full'.
 * - readmore: Flag for more state. Will be true if the teaser content of the
 *   node cannot hold the main body content.
 * - logged_in: Flag for authenticated user status. Will be true when the
 *   current user is a logged-in member.
 * - is_admin: Flag for admin user status. Will be true when the current user
 *   is an administrator.
 *
 * @ingroup templates
 *
 * @see template_preprocess_node()
 *
 * @todo Remove the id attribute (or make it a class), because if that gets
 *   rendered twice on a page this is invalid CSS for example: two lists
 *   in different view modes.
 */
#}

{% set background_img_url = file_url(content.field_extra_image2['#items'].entity.uri.value)  ?: '' %}

{{ attach_library('brandstheme/ruffles') }}

<section id="product" class="ruffles-product-detail-section nid-{{ node.id }}">

  <div class="ruffles-product-detail-intro-block">

    <div class="pos-relative">
      <div class="container-fluid ruffles-background-holder padding-none" style="background-color:{{ background_color }}">
        <div class="row">
          <div class="col-md-5 ruffles-product-detail-img-bg">
            {# <div class="ruffles-product-zig-zag"></div> #}
          </div>
          <div class="col-md-7 ruffles-product-detail-copy-bg">

          </div>
        </div>
      </div>

      <div class="container">

        <div class="row center-align-md-dsk overflow-hidden">

          <div class="col-md-5 ruffles-product-details-img-block center-align z-index-minus" style="background-color:{{ background_color }}">
            <div class="ruffles-product-img-zig-zag">
              <?xml version="1.0" encoding="utf-8"?>
              <!-- Generator: Adobe Illustrator 25.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
              <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                   viewBox="0 0 175 1920" style="enable-background:{{ background_color }};" xml:space="preserve">
              <style type="text/css">
                .st0 {
                  fill:{{ background_color }} !important;
                }
              </style>
                              <path class="st0" d="M84.01,1920.41c-28,0-56,0-84.01,0c0-640,0-1280,0-1920c28,0,56,0,84.01,0c14.77,16.97,29.54,33.93,44.3,50.9
                c7.48,8.6,7.48,19.85-0.06,28.59c-15.56,18.05-31.19,36.03-46.7,54.11c-7.47,8.71-7.28,17.76,0.25,26.44
                c15.29,17.61,30.58,35.23,45.87,52.86c8.35,9.63,8.27,20.47-0.08,30.09c-15.51,17.87-30.79,35.94-46.54,53.59
                c-5.57,6.24-6.08,18.95,0,25.55c15.35,16.66,29.85,34.1,44.74,51.18c10.89,12.49,10.93,21.88,0.14,34.29
                c-15.08,17.36-30.12,34.76-45.12,52.18c-6.3,7.32-6.21,17.34,0.06,24.56c15.73,18.12,31.46,36.23,47.18,54.36
                c7.77,8.96,7.84,19.99,0.12,28.95c-15.65,18.18-31.39,36.29-47.02,54.5c-6.85,7.98-6.72,17.41,0.1,25.28
                c15.5,17.87,31.02,35.74,46.52,53.61c8.15,9.4,8.11,20.38,0.02,29.72c-15.61,18-31.21,36.01-46.76,54.06
                c-6.59,7.66-6.58,17.32-0.03,24.9c15.04,17.39,30.12,34.75,45.21,52.1c10.36,11.91,10.32,21.56-0.09,33.54
                c-15.08,17.36-30.1,34.77-45.12,52.18c-6.55,7.59-6.49,17.45,0.01,24.93c15.63,17.98,31.23,35.99,46.87,53.97
                c7.94,9.12,8.03,20.17,0.12,29.35c-15.56,18.05-31.19,36.03-46.7,54.11c-7.06,8.24-6.94,17.61,0.07,25.68
                c15.51,17.87,31.02,35.74,46.52,53.61c8.09,9.32,7.96,20.28-0.23,29.71c-15.51,17.87-30.99,35.76-46.44,53.68
                c-6.82,7.91-6.87,17.47-0.11,25.29c15.04,17.39,30.13,34.74,45.21,52.1c10.17,11.7,10.15,21.45,0,33.16
                c-15.18,17.49-30.33,35.01-45.45,52.56c-6.35,7.37-6.34,17.34-0.07,24.55c15.73,18.12,31.46,36.24,47.2,54.34
                c7.74,8.9,7.86,20.08,0.2,28.97c-15.67,18.17-31.4,36.28-47.02,54.5c-7,8.16-6.78,17.52,0.31,25.68
                c15.4,17.74,30.8,35.48,46.2,53.23c8.34,9.61,8.23,20.44-0.15,30.09c-15.4,17.74-30.76,35.52-46.11,53.3
                c-7.05,8.16-7.16,17.61-0.19,25.67c15.15,17.52,30.37,34.98,45.54,52.48c9.54,11,9.55,21.09,0.08,32.02
                C112.57,1887.4,98.29,1903.91,84.01,1920.41z"/>
              </svg>

            </div>

            <img class="w-75 w-70-dsk" itemprop="image" src="{{ nodeimgurl }}" alt="{{ nodeimgalt }}">

          </div>

          <div class="col-md-7 ruffles-product-detail-copy">

            <h3>
              {{ subtitle|raw }}
            </h3>

            <p>
              {% if node.body.0.value|striptags is not empty %}
                {{ node.body.0.value | raw }}
              {% endif %}
            </p>

            <div class="product-buy-now">
              {#						<h4 class="linkeable">{{'Buy Now'|t }}</h4>#}
              <div class="product-field-detail">
              {% if show_product_buynow %}
                <button class = "buynow_ruffles js-buynow" id = "ruffles-buy" data-target="#rufflesModal" data-toggle="modal">
                  {{'Buy Now'|t|raw}}
                </button>
              {% endif %}                 
                 
              </div>

              <div class="modal bootstrap-modal bg-transparent ruffles-buynow-modal" id="rufflesModal" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-body">
                      <button type="button" id = "closeModal" class="close" data-dismiss="modal">Ã—</button>
                      {# <p>Content goes here</p> #}
                      {% if iframe_url %}
                        <iframe id="snack-shop" src="{{iframe_url}}"></iframe>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>



            </div>

          {# <div class="ruffles-product-detail-btn"> #}
            {# <a class="btn_ruffles" href="#"> #}
            {# {{ buy_now | raw }} #}
            {# </a> #}
            {# </div> #}

          </div>

        </div>

      </div>

    </div>

  </div>


  {% if noderecipeingredients is not empty and nutrition is not empty %}

    <div id="ruffles-productdetails-info-block" class="">

      <div class="container">
        <div class="row">


          <div class="col-md-6 ruffles-productdetails-nutrition-info">
            <h3>{{ 'Nutrition'|t }}</h3>


            <div class="ruffles-productdetails-nutrition-header-row">
              <div class="ruffles-productdetails-nutrition-cell ruffles-productdetails-headercell bold">
                {{ 'Amount'|t }}  {{ portion }}
              </div>

              <div class="ruffles-productdetails-nutrition-cell ruffles-productdetails-headercell bold">
                {{ '% Daily Value'|t }}
              </div>
            </div>

            {{ nutrition | raw }}

          </div>


          <div class="col-md-6 ruffles-productdetails-ingredients-info">

            <h3>{{ 'Ingredients'|t }}</h3>

            <p>
              {{ noderecipeingredients | raw }}
            </p>

            <p class="product-alert padding-top">
              {{ alert }}
            </p>

          </div>

        </div>
      </div>

    </div>

  {% endif %}


</section>


<div class="ruffles-content-background-container-products ruffles-product-details-featured-carousel">
  {% if noderecipeingredients is not empty and nutrition is not empty %}
    <div class="ruffles-products-zig-zag"></div>
  {% else %}
   <div class="empty-div"></div>
  {% endif %}
  <div class="ruffles-featured-product--container-bg-desktop">
    {% include '@brandstheme/includes/featured/featured-products-ruffles.html.twig' %}
  </div>
</div>


<section id="coupon" class="ruffles-coupon-block">
  <div class="ruffles-coupon-zig-zag"></div>
  <div class="ruffles-section-container ruffles-coupon-side-by-side-block">
    {{ coupon_block|t|raw }}
  </div>
</section>
